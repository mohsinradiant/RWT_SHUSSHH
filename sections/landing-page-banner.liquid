<div class="lp-banner-container">
  <img class="lp-desktop-banner" src="{{section.settings.desktop_image |  image_url }}">
  <img class="lp-mobile-banner" src="{{section.settings.mobile_image |  image_url }}">
</div>

<style>
  .lp-banner-container {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }
  .lp-desktop-banner {
    display: flex;
  }
  .lp-mobile-banner {
    display: none;
  }
  .lp-desktop-banner,
  .lp-mobile-banner {
    width: 100%;
    height: auto;
  }
  @media (max-width: 750px) {
    .lp-desktop-banner {
      display: none;
    }
    .lp-mobile-banner {
      display: flex;
    }
  }
</style>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    gsap.registerPlugin(ScrollTrigger);

    const banner = document.getElementById('shopify-section-template--23879230095670__landing_page_banner_tPURrF');

    ScrollTrigger.create({
      trigger: banner,
      start: 'top 80%', // Starts when 80% of banner is in view
      onEnter: () => {
        flickerEffect();
      },
    });

    function flickerEffect() {
      gsap.to(banner, {
        opacity: () => gsap.utils.random(0.3, 1), // More dramatic flickers (30% - 100% opacity)
        filter: () => `brightness(${gsap.utils.random(0.3, 1.7)})`, // Higher contrast between bright & dim
        duration: gsap.utils.random(0.05, 0.2), // Quick, snappy flickers
        repeat: Math.floor(5 / 0.15), // Ensures effect lasts 5s
        yoyo: true, // Gives a natural on-off flicker
        ease: 'power1.inOut', // Keeps movement smooth
        onComplete: () => {
          gsap.to(banner, { opacity: 1, filter: 'brightness(1)', duration: 1.5, ease: 'power2.out' }); // Smooth stabilization
        },
      });
    }
  });
</script>
{% schema %}
{
  "name": "LP Banner",
  "settings": [
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Image"
    }
  ],
  "presets": [
    {
      "name": "LP Banner"
    }
  ]
}
{% endschema %}
