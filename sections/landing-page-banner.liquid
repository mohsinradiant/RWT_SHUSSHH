<div class="lp-banner-container">
  <img class="lp-desktop-banner" src="{{section.settings.desktop_image |  image_url }}">
  <img class="lp-mobile-banner" src="{{section.settings.mobile_image |  image_url }}">
</div>

<style>
  .lp-banner-container {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }
  .lp-desktop-banner {
    display: flex;
  }
  .lp-mobile-banner {
    display: none;
  }
  .lp-desktop-banner,
  .lp-mobile-banner {
    width: 100%;
    height: auto;
  }
  @media (max-width: 750px) {
    .lp-desktop-banner {
      display: none;
    }
    .lp-mobile-banner {
      display: flex;
    }
  }
</style>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    gsap.registerPlugin(ScrollTrigger);

    const banner = document.getElementById('shopify-section-template--23879230095670__landing_page_banner_tPURrF');

    ScrollTrigger.create({
      trigger: banner,
      start: 'top 80%', // Effect starts when 80% of banner is in view
      onEnter: () => {
        flickerEffect();
      },
    });

    function flickerEffect() {
      gsap.to(banner, {
        opacity: () => gsap.utils.random(0.5, 1), // Flickers between 50% and 100% opacity
        filter: () => `brightness(${gsap.utils.random(0.5, 1.4)})`, // Varying light intensity
        duration: gsap.utils.random(0.1, 0.3), // Slower flickers for a more dramatic effect
        repeat: Math.floor(5 / 0.2), // Ensures the effect lasts about 5s
        yoyo: true, // Natural flickering feel
        onComplete: () => {
          gsap.to(banner, { opacity: 1, filter: 'brightness(1)', duration: 1 }); // Stabilizes smoothly after flickering
        },
      });
    }
  });
</script>
{% schema %}
{
  "name": "LP Banner",
  "settings": [
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Image"
    }
  ],
  "presets": [
    {
      "name": "LP Banner"
    }
  ]
}
{% endschema %}
